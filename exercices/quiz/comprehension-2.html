<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Quiz A2/B1 ‚Äì Compr√©hension professionnelle</title>

<style>
  body{
    font-family:Arial, sans-serif;
    background:#eef3f9;
    margin:0;
    padding:20px;
  }
  .container{
    max-width:800px;
    margin:auto;
    background:#fff;
    padding:20px;
    border-radius:12px;
    box-shadow:0 4px 20px rgba(0,0,0,0.2);
  }
  h2{
    color:#004c97;
    margin-top:0;
  }
  .scenario{
    font-weight:bold;
    margin-bottom:10px;
  }
  .option{
    background:#f0f4ff;
    border:1px solid #ccd9ff;
    padding:10px;
    border-radius:10px;
    margin:8px 0;
    cursor:pointer;
  }
  .option:hover{
    background:#dfe8ff;
  }
  .correct{
    color:green;
    font-weight:bold;
    margin-top:10px;
  }
  .wrong{
    color:red;
    font-weight:bold;
    margin-top:10px;
  }
  #resetBtn{
    display:none;
    background:#d9534f;
    color:white;
    border:none;
    padding:10px 15px;
    border-radius:8px;
    margin-top:20px;
    cursor:pointer;
  }
  .scoreBox{
    font-size:18px;
    font-weight:bold;
    margin-bottom:15px;
    color:#004c97;
  }
</style>
  <link rel="stylesheet" href="../../exercise-layout.css">
  <script defer src="../../exercise-layout.js"></script>
</head>

<body>

<div class="back-home" style="max-width:1100px;margin:10px auto 0;padding:0 20px;">
  <a class="back-home__link" href="../../index.html" style="display:inline-flex;align-items:center;gap:6px;text-decoration:none;color:#004c6d;font-weight:700;border:1px solid #cfdff0;padding:6px 14px;border-radius:999px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.08);">‚Üê Retour √† l‚Äôindex</a>
</div>
<script src="../shared/proactif-exercise.js"></script>
<div class="exercise-shell">
  <main class="exercise-card">



<!-- INTRO -->
<div id="intro" style="max-width:800px;margin:auto;background:#ffffff;padding:25px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.2);">
  <h2>Quiz A2/B1 ‚Äì Compr√©hension professionnelle</h2>
  <p>üìò <b>Objectif :</b> Comprendre des situations complexes au travail (consignes, probl√®mes, dialogues, emails).</p>
  <p>üéØ <b>Comp√©tences :</b></p>
  <ul>
    <li>Lire un message professionnel.</li>
    <li>Comprendre des dialogues au travail.</li>
    <li>Analyser une situation et choisir la bonne r√©action.</li>
    <li>Interpr√©ter des informations implicites.</li>
  </ul>
  <p>‚≠ê <b>Score :</b> 1 point seulement si bonne r√©ponse du premier coup.</p>

  <button onclick="startQuiz()" style="background:#004c97;color:white;padding:12px 20px;border:none;border-radius:8px;cursor:pointer;font-size:16px;">Commencer</button>
</div>

<!-- QUIZ -->
<div class="container" id="quizContainer" style="display:none;">
  <h2>Quiz ‚Äì Situations professionnelles A2/B1</h2>
  <div class="scoreBox">Score : <span id="score">0</span>/<span id="total">0</span></div>

  <div id="scenario" class="scenario"></div>
  <div id="options"></div>
  <div id="feedback"></div>

  <button id="resetBtn" onclick="resetAll()">R√©initialiser</button>
</div>

<script>
// ----------------------------------------------------
// 50 QUESTIONS MIX A2/B1
// ----------------------------------------------------
const questions = [
  {text:"Un coll√®gue vous dit : ¬´ On doit finir cette commande avant 14h, sinon le client attendra. ¬ª Que faites-vous ?", options:["Vous ralentissez","Vous travaillez plus vite et vous organisez","Vous partez en pause longue"], correct:1},
  {text:"Vous recevez un message : ¬´ Bonjour, pouvez-vous v√©rifier les stocks avant 16h ? Merci. ¬ª", options:["Vous v√©rifiez les stocks","Vous ignorez le message","Vous v√©rifiez demain"], correct:0},
  {text:"Un chef vous dit : ¬´ La priorit√© aujourd‚Äôhui, c‚Äôest la s√©curit√©. Faites tr√®s attention. ¬ª", options:["Vous travaillez normalement","Vous faites attention √† chaque geste","Vous courez pour aller plus vite"], correct:1},
  {text:"Un coll√®gue vous dit : ¬´ Tu peux appeler le fournisseur ? Il ne r√©pond pas √† mes emails. ¬ª", options:["Vous envoyez un SMS au hasard","Vous appelez le fournisseur","Vous attendez la fin de la journ√©e"], correct:1},
  {text:"Lors d‚Äôune r√©union, on vous dit : ¬´ Chacun doit proposer une id√©e pour am√©liorer l‚Äôorganisation. ¬ª", options:["Vous proposez une id√©e simple","Vous ne parlez pas","Vous quittez la salle"], correct:0},

  {text:"La responsable vous √©crit : ¬´ Merci de pr√©parer un rapport avec les probl√®mes rencontr√©s cette semaine. ¬ª", options:["Vous pr√©parez un rapport clair","Vous supprimez le message","Vous envoyez juste un mot : OK"], correct:0},
  {text:"Un coll√®gue dit : ¬´ On a un conflit dans l‚Äô√©quipe, on doit discuter calmement. ¬ª", options:["Vous criez","Vous √©coutez et donnez votre avis calmement","Vous partez"], correct:1},
  {text:"Une affiche dit : ¬´ Nouvelle r√®gle : chaque employ√© doit signaler imm√©diatement tout accident, m√™me petit. ¬ª", options:["Vous attendez la fin de la journ√©e","Vous signalez un accident imm√©diatement","Vous ne signalez rien"], correct:1},
  {text:"Le chef dit : ¬´ La machine 3 fait un bruit bizarre. Stoppez-la et pr√©venez-moi. ¬ª", options:["Vous continuez","Vous arr√™tez la machine et vous pr√©venez","Vous √©teignez tout le b√¢timent"], correct:1},
  {text:"Un email dit : ¬´ R√©union d√©plac√©e √† 15h au lieu de 14h. Merci de confirmer. ¬ª", options:["Vous ne r√©pondez pas","Vous confirmez votre pr√©sence","Vous arrivez √† 14h"], correct:1},

  {text:"Votre coll√®gue : ¬´ On doit pr√©parer la livraison ensemble, tu peux commencer par les cartons lourds ? ¬ª", options:["Vous l‚Äôaidez","Vous refusez sans raison","Vous partez boire un caf√©"], correct:0},
  {text:"Le responsable : ¬´ La qualit√© n‚Äôest pas bonne aujourd‚Äôhui, v√©rifiez davantage. ¬ª", options:["Vous v√©rifiez mieux","Vous travaillez plus vite","Vous ignorez"], correct:0},
  {text:"Une affiche interne : ¬´ Nouveaux horaires : pause obligatoire de 20 minutes. ¬ª", options:["Vous faites une pause de 5 minutes","Vous respectez la pause de 20 minutes","Vous ne faites pas de pause"], correct:1},
  {text:"Une cliente dit : ¬´ D√©sol√©e, ce produit est ab√Æm√©. Pouvez-vous m‚Äôaider ? ¬ª", options:["Vous l‚Äôignorez","Vous l‚Äôaidez et cherchez une solution","Vous dites : ce n‚Äôest pas mon probl√®me"], correct:1},
  {text:"Votre chef : ¬´ Demain, on doit former le nouveau coll√®gue. Je compte sur toi. ¬ª", options:["Vous pr√©parez quelques explications","Vous n‚Äôaidez pas","Vous lui dites d‚Äôaller sur Google"], correct:0},

  {text:"Un email : ¬´ Merci de transmettre les documents avant midi, c‚Äôest urgent. ¬ª", options:["Vous envoyez avant midi","Vous envoyez le soir","Vous n‚Äôenvoyez rien"], correct:0},
  {text:"Votre coll√®gue : ¬´ Attention, le client est tr√®s stress√© aujourd‚Äôhui. Sois patient. ¬ª", options:["Vous parlez calmement","Vous √™tes agressif","Vous parlez vite"], correct:0},
  {text:"Le chef : ¬´ On a un contr√¥le demain. Rangez bien la zone. ¬ª", options:["Vous rangez la zone","Vous faites le minimum","Vous partez plus t√¥t"], correct:0},
  {text:"Une note interne : ¬´ Travaillez en bin√¥me pour √©viter les erreurs. ¬ª", options:["Vous travaillez seul","Vous travaillez en bin√¥me","Vous travaillez sans v√©rifier"], correct:1},
  {text:"Un coll√®gue : ¬´ √áa te d√©range si on √©change nos horaires demain ? ¬ª", options:["Vous r√©pondez honn√™tement si c‚Äôest possible ou non","Vous ne r√©pondez pas","Vous vous √©nervez"], correct:0},

  {text:"Un client dit : ¬´ Excusez-moi, j‚Äôai attendu longtemps‚Ä¶ ¬ª", options:["Vous expliquez calmement et vous aidez","Vous criez","Vous l‚Äôignorez"], correct:0},
  {text:"Votre responsable : ¬´ Merci d‚Äôenvoyer un message quand tu as termin√©. ¬ª", options:["Vous envoyez un message","Vous faites rien","Vous partez"], correct:0},
  {text:"Email : ¬´ Bonjour, le document joint est erron√©. Merci de le corriger. ¬ª", options:["Vous corrigez et renvoyez","Vous supprimez l‚Äôemail","Vous envoyez le m√™me document"], correct:0},
  {text:"Affiche : ¬´ Priorit√© aux pi√©tons dans l‚Äôentrep√¥t. ¬ª", options:["Vous faites attention aux pi√©tons","Vous roulez vite avec le chariot","Vous ignorez"], correct:0},
  {text:"Chef : ¬´ Cette t√¢che demande pr√©cision et lenteur. Pas de vitesse aujourd‚Äôhui. ¬ª", options:["Vous travaillez lentement et bien","Vous travaillez vite","Vous changez de poste"], correct:0},

  {text:"Dialogue : ¬´ On a une erreur dans la commande de hier. Tu peux m‚Äôaider √† comprendre ? ¬ª", options:["Vous aidez","Vous refusez","Vous partez"], correct:0},
  {text:"Email : ¬´ Merci de lire le nouveau r√®glement interne et de le signer. ¬ª", options:["Vous lisez et signez","Vous ne lisez pas","Vous signez sans lire"], correct:0},
  {text:"Coll√®gue : ¬´ Le client veut changer sa commande, c‚Äôest possible ? ¬ª", options:["Vous v√©rifiez le syst√®me","Vous dites non sans r√©fl√©chir","Vous ignorez"], correct:0},
  {text:"Chef : ¬´ On doit r√©agir vite. Le camion arrive dans 10 minutes. ¬ª", options:["Vous pr√©parez rapidement","Vous buvez un caf√©","Vous attendez"], correct:0},
  {text:"Email : ¬´ Le fournisseur annonce un retard, adaptez votre planning. ¬ª", options:["Vous adaptez","Vous gardez le m√™me planning","Vous arr√™tez de travailler"], correct:0},

  {text:"Dialogue : ¬´ Je pense qu‚Äôon doit revoir l‚Äôorganisation, √ßa ne fonctionne pas bien. ¬ª", options:["Vous proposez des am√©liorations","Vous vous √©nervez","Vous ne dites rien"], correct:0},
  {text:"Chef : ¬´ Tu peux expliquer au nouveau comment utiliser cette machine ? ¬ª", options:["Vous expliquez calmement","Vous le laissez seul","Vous partez"], correct:0},
  {text:"Message : ¬´ On a besoin d‚Äôun rempla√ßant pour vendredi. Disponible ? ¬ª", options:["Vous r√©pondez rapidement","Vous ignorez","Vous r√©pondez une semaine apr√®s"], correct:0},
  {text:"Un client : ¬´ J‚Äôai re√ßu la mauvaise facture. ¬ª", options:["Vous v√©rifiez et corrigez","Vous dites que ce n‚Äôest pas votre faute","Vous partez"], correct:0},
  {text:"Affiche : ¬´ Zone bruyante ‚Äì protection obligatoire. ¬ª", options:["Vous mettez une protection","Vous entrez sans protection","Vous courez"], correct:0},

  {text:"Chef : ¬´ Le planning change, tu commences √† 6h demain. ¬ª", options:["Vous arrivez √† 6h","Vous arrivez √† 8h","Vous ne venez pas"], correct:0},
  {text:"Coll√®gue : ¬´ Cette t√¢che demande 2 personnes. Tu m‚Äôaides ? ¬ª", options:["Vous aidez","Vous refusez","Vous partez"], correct:0},
  {text:"Email : ¬´ Merci d‚Äôimprimer 10 copies de ce document pour la r√©union. ¬ª", options:["Vous imprimez","Vous envoyez un SMS","Vous ignorez"], correct:0},
  {text:"Chef : ¬´ Tu peux me faire un retour sur la journ√©e ? ¬ª", options:["Vous faites un compte-rendu simple","Vous dites juste : √ßa va","Vous partez"], correct:0},
  {text:"Coll√®gue : ¬´ Le client attend au t√©l√©phone depuis longtemps, tu peux prendre l‚Äôappel ? ¬ª", options:["Vous prenez l‚Äôappel","Vous attendez","Vous raccrochez"], correct:0},

  {text:"Affiche : ¬´ Risque chimique ‚Äì suivre le protocole. ¬ª", options:["Vous suivez le protocole","Vous ne faites rien","Vous entrez sans mat√©riel"], correct:0},
  {text:"Email : ¬´ Merci de mettre √† jour le fichier partag√©. ¬ª", options:["Vous mettez √† jour","Vous supprimez le fichier","Vous changez tout sans pr√©venir"], correct:0},
  {text:"Chef : ¬´ Il y a une erreur dans cette commande, retrouve-la. ¬ª", options:["Vous analysez pour trouver l‚Äôerreur","Vous envoyez la commande","Vous laissez quelqu‚Äôun d‚Äôautre le faire"], correct:0},
  {text:"Coll√®gue : ¬´ J‚Äôai besoin de toi pour v√©rifier la marchandise. ¬ª", options:["Vous v√©rifiez ensemble","Vous refusez","Vous partez manger"], correct:0},
  {text:"Responsable : ¬´ On doit am√©liorer la communication. Tu peux proposer une solution ? ¬ª", options:["Vous proposez une id√©e","Vous ne dites rien","Vous critiquez"], correct:0}
];

// ----------------------------------------------------
// LOGIQUE DU QUIZ
// ----------------------------------------------------
let index = parseInt(localStorage.getItem('quizAB_index') || '0');
let score = parseInt(localStorage.getItem('quizAB_score') || '0');
let answered = false;
let firstAttempt = true;
let currentCorrectIndex = null;

const scoreSpan = document.getElementById('score');
const totalSpan = document.getElementById('total');
scoreSpan.textContent = score;
totalSpan.textContent = questions.length;

function shuffleArray(arr){
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function startQuiz(){
  document.getElementById('intro').style.display = 'none';
  document.getElementById('quizContainer').style.display = 'block';
}

function loadQuestion(){
  if(index >= questions.length){
    document.getElementById('scenario').innerHTML = "Quiz termin√© !";
    document.getElementById('options').innerHTML = "";
    document.getElementById('feedback').innerHTML = "Votre score final : " + score + "/" + questions.length;
    document.getElementById('resetBtn').style.display = "block";
    if (window.proactifMarkExerciseDone) {
      try { window.proactifMarkExerciseDone(); } catch (e) { }
    }
    return;
  }

  const q = questions[index];
  answered = false;
  firstAttempt = true;
  currentCorrectIndex = null;
  document.getElementById('feedback').innerHTML = "";
  document.getElementById('scenario').textContent = q.text;

  const optionObjects = q.options.map((opt, idx) => ({ text: opt, originalIndex: idx }));
  shuffleArray(optionObjects);

  optionObjects.forEach((obj, newIdx) => {
    if(obj.originalIndex === q.correct){
      currentCorrectIndex = newIdx;
    }
  });

  let html = "";
  optionObjects.forEach((obj, i) => {
    html += `<div class="option" onclick="choose(${i})">${obj.text}</div>`;
  });
  document.getElementById('options').innerHTML = html;
}

function choose(i){
  if(answered) return;

  if(i === currentCorrectIndex){
    if(firstAttempt){
      score++;
      localStorage.setItem('quizAB_score', score.toString());
      scoreSpan.textContent = score;
    }
    document.getElementById('feedback').innerHTML = '<div class="correct">‚úî Bonne r√©ponse !</div>';
    answered = true;

    setTimeout(() => {
      index++;
      localStorage.setItem('quizAB_index', index.toString());
      loadQuestion();
    }, 700);
  } else {
    document.getElementById('feedback').innerHTML = '<div class="wrong">‚úò Mauvaise r√©ponse</div>';
    firstAttempt = false;
  }
}

function resetAll(){
  localStorage.removeItem('quizAB_index');
  localStorage.removeItem('quizAB_score');
  index = 0;
  score = 0;
  answered = false;
  firstAttempt = true;
  scoreSpan.textContent = score;
  document.getElementById('resetBtn').style.display = 'none';
  loadQuestion();
}

loadQuestion();
</script>

  </main>
</div>

</body>
</html>
