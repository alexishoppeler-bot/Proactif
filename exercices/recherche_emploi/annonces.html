<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Exercice ‚Äì Trouver la bonne annonce</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --blue:#2980ff;
  --green:#1a8c6d;
  --bg:#e8f4f1;
  --card:#ffffff;
  --dark:#0b2a4a;
}
body{
  margin:0;
  font-family:"Open Sans", Arial, sans-serif;
  background:linear-gradient(180deg,#e3f2ff,#d3fbe9);
  padding:20px;
  color:#0a2a3a;
}
h1{
  text-align:center;
  margin:20px auto 35px;
  color:#0b2a4a;
  font-size:2.3rem;
  font-weight:700;
  letter-spacing:1px;
  text-shadow:0 2px 4px rgba(0,0,0,0.18);
}
#app{
  max-width:900px;
  margin:20px auto;
  padding:0 10px;
}
.card{
  background:rgba(255,255,255,0.7);
  padding:26px;
  border-radius:24px;
  box-shadow:0 10px 28px rgba(0,0,0,0.12);
  margin-bottom:28px;
  cursor:auto;
  backdrop-filter:blur(14px);
  transition:transform .25s ease, box-shadow .25s ease;
}
.card:hover{
  box-shadow:0 10px 28px rgba(0,0,0,0.12);
  transform:none;
}
.annonce:hover{
  transform:translateY(-6px) scale(1.03);
  box-shadow:0 14px 36px rgba(0,0,0,0.22);
  cursor:pointer;
}
.profile{
  border:3px solid var(--blue);
  box-shadow:0 0 12px rgba(41,128,255,0.35);
}
.good{
  background:#d4f8e4 !important;
  border-left:10px solid #1a8c6d;
}
.bad{
  background:#ffd6d6 !important;
  border-left:10px solid #d9534f;
}
button{
  display:block;
  margin:35px auto 0;
  padding:15px 32px;
  border:none;
  background:linear-gradient(135deg,var(--blue),var(--green));
  color:white;
  font-size:1.2rem;
  border-radius:18px;
  cursor:pointer;
  box-shadow:0 6px 16px rgba(0,0,0,0.18);
  font-weight:600;
  transition:transform .25s, box-shadow .25s;
}
button:hover{
  transform:scale(1.06);
  box-shadow:0 10px 26px rgba(0,0,0,0.28);
}
#scoreBox{
  text-align:center;
  font-size:1.3rem;
  font-weight:600;
  margin:25px auto 20px;
  color:#0b2a4a;
  background:rgba(255,255,255,0.55);
  padding:14px 18px;
  border-radius:14px;
  max-width:500px;
  backdrop-filter:blur(8px);
  box-shadow:0 4px 14px rgba(0,0,0,0.12);
}
#progressBarContainer{
  width:100%;
  height:14px;
  background:rgba(255,255,255,0.45);
  border-radius:10px;
  overflow:hidden;
  margin:10px auto 25px;
  max-width:800px;
  backdrop-filter:blur(6px);
}
#progressBar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--blue),var(--green));
  transition:width .4s ease;
}
#annonceProgressContainer{
  width:100%;
  height:10px;
  background:rgba(255,255,255,0.45);
  border-radius:10px;
  overflow:hidden;
  margin-top:14px;
}
#annonceProgress{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--blue),var(--green));
  transition:width .4s ease;
}
</style>
  <link rel="stylesheet" href="../../exercise-layout.css">
  <script defer src="../../exercise-layout.js"></script>
</head>
<body>

<div class="back-home" style="max-width:1100px;margin:10px auto 0;padding:0 20px;">
  <a class="back-home__link" href="../../index.html" style="display:inline-flex;align-items:center;gap:6px;text-decoration:none;color:#004c6d;font-weight:700;border:1px solid #cfdff0;padding:6px 14px;border-radius:999px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.08);">‚Üê Retour √† l‚Äôindex</a>
</div>
<script src="../shared/proactif-exercise.js"></script>
<div class="exercise-shell">
  <main class="exercise-card">


<h1>üß© Trouver la bonne annonce</h1>

<div class="card" style="cursor:auto; text-align:center; background:rgba(255,255,255,0.9); box-shadow:0 8px 24px rgba(0,0,0,0.12);">
  <h2>üìò Consignes</h2>
  <p>Choisissez l‚Äôannonce qui correspond le mieux au profil. Lisez bien les phrases : t√¢ches, horaires, difficult√©s, exigences.</p>
  <p>Si vous vous trompez, la carte devient rouge. Si vous trouvez directement, elle devient verte.</p>
  <p>But du jeu : comprendre les annonces et faire le bon choix du premier coup.</p>
  <button onclick="recommencer()">üîÑ R√©initialiser l‚Äôexercice</button>
</div>

<div id="app"></div>
<div id="scoreBox"></div>
<div id="progressBarContainer"><div id="progressBar"></div></div>

<script>
// ------------------- DONN√âES -------------------
const profils = [
  {
    nom:"Profil 1 ‚Äì Assistante de nettoyage",
    texte:"Samira, 38 ans, recherche un poste de nettoyage. Elle a travaill√© plus de 3 ans dans l‚Äôentretien de bureaux et sait organiser son travail seule. Elle ma√Ætrise le d√©poussi√©rage, le nettoyage des sols et l‚Äôutilisation de produits standards.",
    annonces:[
      {texte:"Bureaux ‚Äì Lausanne ‚Ä¢ 06h‚Äì10h ‚Ä¢ 50 % ‚Ä¢ Nettoyage simple : sols, poussi√®re, sanitaires. Lieu calme.",correct:true},
      {texte:"H√¥tel ‚Äì Nettoyage des chambres ‚Ä¢ 08h‚Äì16h ‚Ä¢ 90 % ‚Ä¢ Travail rapide, nombreuses chambres.",correct:false},
      {texte:"Entrep√¥t ‚Äì Nettoyage m√©canique ‚Ä¢ 14h‚Äì22h ‚Ä¢ 100 % ‚Ä¢ Machines lourdes √† utiliser.",correct:false},
      {texte:"Centre commercial ‚Äì Soir√©e ‚Ä¢ 18h‚Äì23h ‚Ä¢ 70 % ‚Ä¢ Zones tr√®s fr√©quent√©es, rythme soutenu.",correct:false}
    ]
  },
  {
    nom:"Profil 2 ‚Äì Employ√© polyvalent de restaurant",
    texte:"Mario, 29 ans, peut aider en cuisine : couper des l√©gumes, pr√©parer des salades, faire la plonge et garder les postes propres. Il ne veut pas travailler tard le soir.",
    annonces:[
      {texte:"Cuisine simple ‚Äì Petit restaurant ‚Ä¢ 09h‚Äì15h ‚Ä¢ Pr√©paration froide, plonge, rythme doux.",correct:true},
      {texte:"Service du soir ‚Äì Bar ‚Ä¢ 18h‚Äì01h ‚Ä¢ Tr√®s bruyant, service rapide.",correct:false},
      {texte:"Restaurant gastronomique ‚Ä¢ 11h‚Äì23h ‚Ä¢ Travail technique, grande pression.",correct:false},
      {texte:"Livraison de repas ‚Ä¢ Horaires coup√©s ‚Ä¢ Conduite scooter en ville.",correct:false}
    ]
  },
  {
    nom:"Profil 3 ‚Äì Aide-logistique l√©g√®re",
    texte:"Oumar, 42 ans, peut emballer, trier et pr√©parer des petits colis. Il ne doit pas porter plus de 10 kg.",
    annonces:[
      {texte:"D√©p√¥t l√©ger ‚Äì Renens ‚Ä¢ 08h‚Äì12h ‚Ä¢ Emballage, tri, petites charges. Rythme calme.",correct:true},
      {texte:"Manutention lourde ‚Äì Grande surface ‚Ä¢ 100 % ‚Ä¢ Charges de 20‚Äì30 kg.",correct:false},
      {texte:"Livraison en camionnette ‚Ä¢ 07h‚Äì17h ‚Ä¢ Chargement de colis lourds.",correct:false},
      {texte:"Entrep√¥t frigorifique ‚Ä¢ Froid intense ‚Ä¢ Travail debout prolong√©.",correct:false}
    ]
  },
  {
    nom:"Profil 4 ‚Äì Aide √† la vente",
    texte:"Nadia, 33 ans, aime accueillir, conseiller et organiser les rayons. Elle pr√©f√®re √©viter la caisse.",
    annonces:[
      {texte:"Magasin bio ‚Äì Rayon fruits/l√©gumes ‚Ä¢ Mise en rayon, tri, rangement. Pas de caisse.",correct:true},
      {texte:"Supermarch√© ‚Äì Caisse ‚Ä¢ Travail week-end, encaissement constant.",correct:false},
      {texte:"Boutique mode ‚Äì Vente active ‚Ä¢ Objectifs de vente et gestion de caisse.",correct:false},
      {texte:"Station-service ‚Ä¢ Vente + caisse ‚Ä¢ Horaires irr√©guliers.",correct:false}
    ]
  },
  {
    nom:"Profil 5 ‚Äì Aide de production simple",
    texte:"Igor, 45 ans, souhaite un travail calme avec des gestes r√©p√©titifs simples.",
    annonces:[
      {texte:"Atelier alimentaire ‚Äì 50‚Äì80 % ‚Ä¢ Portionner, emballer, √©tiqueter. Rythme lent.",correct:true},
      {texte:"Ligne de production industrielle ‚Ä¢ Cadence rapide.",correct:false},
      {texte:"Cuisine centrale ‚Ä¢ Tr√®s grosses quantit√©s √† pr√©parer.",correct:false},
      {texte:"Tri logistique ‚Ä¢ Travail debout rapide, charges r√©guli√®res.",correct:false}
    ]
  },
  {
    nom:"Profil 6 ‚Äì Aide en buanderie",
    texte:"Fatou, 41 ans, aime les t√¢ches r√©guli√®res : plier, trier, ranger le linge.",
    annonces:[
      {texte:"Buanderie EMS ‚Äì Tri et pliage ‚Ä¢ 07h‚Äì12h ‚Ä¢ Travail calme, machines automatiques.",correct:true},
      {texte:"Blanchisserie industrielle ‚Äì Cadence forte ‚Ä¢ Charges lourdes.",correct:false},
      {texte:"H√¥tel ‚Äì √âtages ‚Ä¢ Nettoyage complet des chambres.",correct:false},
      {texte:"Cuisine scolaire ‚Äì Plonge + chaleur + bruit.",correct:false}
    ]
  },
  {
    nom:"Profil 7 ‚Äì Employ√© stockage simple",
    texte:"Ahmet, 36 ans, sait ranger, v√©rifier des dates et pr√©parer des petites commandes.",
    annonces:[
      {texte:"Petit magasin ‚Äì Stock l√©ger ‚Ä¢ V√©rification dates, rangement, petites bo√Ætes.",correct:true},
      {texte:"Entrep√¥t grande surface ‚Ä¢ Charges lourdes fr√©quentes.",correct:false},
      {texte:"Livraison ‚Ä¢ Port de cartons + d√©placements continus.",correct:false},
      {texte:"Chambre froide ‚Äì Temp√©ratures basses prolong√©es.",correct:false}
    ]
  },
  {
    nom:"Profil 8 ‚Äì Aide de caf√©t√©ria",
    texte:"Lucia, 27 ans, peut servir des boissons simples, nettoyer et aider aux pr√©parations. Pas de travail du soir.",
    annonces:[
      {texte:"Caf√©t√©ria entreprise ‚Äì 08h‚Äì14h ‚Ä¢ Service boissons, nettoyage l√©ger.",correct:true},
      {texte:"Restaurant centre-ville ‚Äì Service du soir.",correct:false},
      {texte:"Caf√©-bar ‚Äì Environnement bruyant + horaires variables.",correct:false},
      {texte:"Fast-food ‚Äì Cadence tr√®s rapide.",correct:false}
    ]
  },
  {
    nom:"Profil 9 ‚Äì Entretien ext√©rieur l√©ger",
    texte:"Jean, 55 ans, peut ramasser des feuilles, vider des poubelles et nettoyer des petites zones. Pas de machines lourdes.",
    annonces:[
      {texte:"Commune ‚Äì Entretien simple ‚Ä¢ Feuilles, petits d√©chets. Sans machines lourdes.",correct:true},
      {texte:"Jardinier pro ‚Äì Taille-haies, tondeuses.",correct:false},
      {texte:"Chantier ‚Äì Charges lourdes et poussi√®re.",correct:false},
      {texte:"D√©neigement m√©canique ‚Äì Travail de nuit.",correct:false}
    ]
  },
  {
    nom:"Profil 10 ‚Äì Aide administratif simple",
    texte:"Sara, 34 ans, peut classer, trier des papiers et pr√©parer des enveloppes. Peu √† l‚Äôaise avec l‚Äôordinateur.",
    annonces:[
      {texte:"Association ‚Äì Classement, enveloppes ‚Ä¢ 09h‚Äì13h ‚Ä¢ T√¢ches tr√®s simples.",correct:true},
      {texte:"Bureau ‚Äì Secr√©tariat complet ‚Ä¢ Ma√Ætrise informatique exig√©e.",correct:false},
      {texte:"R√©ception H√¥tel ‚Äì T√©l√©phone + logiciel.",correct:false},
      {texte:"Centre informatique ‚Äì Saisie de donn√©es avanc√©e.",correct:false}
    ]
  }
];

// Profils dans l'ordre, sans m√©lange
let ordreProfils = [...Array(profils.length).keys()];

let score = 0;
let erreurs = 0;
let indexProfil = 0;
let premiereTentative = true;
let profilsRat√©s = []; // conserv√© mais non utilis√© (pas de retour)

function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
}

function updateBar(){
  const pct = Math.round((indexProfil / profils.length) * 100);
  document.getElementById("progressBar").style.width = pct + "%";
}

function updateAnnonceProgress(){
  const el = document.getElementById('annonceProgress');
  if(el) el.style.width = '100%';
}

function afficherProfil(){
  // Fin directe : pas de retour aux profils rat√©s
  if(indexProfil >= ordreProfils.length){
    ecranFinal();
    return;
  }

  const app = document.getElementById("app");
  const p = profils[ordreProfils[indexProfil]];
  premiereTentative = true;

  app.innerHTML = `
    <div class='card profile'>
      <h2>${p.nom}</h2>
      <p>${p.texte}</p>
      <div id='annonceProgressContainer'>
        <div id='annonceProgress'></div>
      </div>
    </div>
  `;

  let annonces = [...p.annonces];
  shuffle(annonces);

  annonces.forEach(a => {
    const d = document.createElement("div");
    d.className = "card annonce";
    d.innerHTML = a.texte;
    d.onclick = () => choisirAnnonce(a.correct, d, ordreProfils[indexProfil]);
    app.appendChild(d);
  });

  updateBar();
  document.getElementById("scoreBox").innerHTML =
    `Progression : ${indexProfil+1}/${profils.length} | Score : ${score} | Erreurs : ${erreurs}`;
}

function choisirAnnonce(correct, el, id){
  if(correct){
    updateAnnonceProgress();
    el.classList.add("good");
    if(premiereTentative) score++;
    setTimeout(() => {
      indexProfil++;
      afficherProfil();
    }, 600);
  } else {
    el.classList.add("bad");
    erreurs++;
    premiereTentative = false;
    // pas de reprise des profils rat√©s
    document.getElementById("scoreBox").innerHTML =
      `Progression : ${indexProfil+1}/${profils.length} | Score : ${score} | Erreurs : ${erreurs}`;
  }
}

function ecranFinal(){
  const app = document.getElementById("app");
  app.innerHTML = `
    <div class='card'>
      <h2>üéâ R√©sultat final</h2>
      <p><b>Score total :</b> ${score} / ${profils.length}</p>
      <p><b>Erreurs :</b> ${erreurs}</p>
      <button onclick='recommencer()'>üîÑ Recommencer</button>
    </div>
  `;

  if (window.proactifMarkExerciseDone) {
    try { window.proactifMarkExerciseDone(); } catch (e) { }
  }
}

function recommencer(){
  score = 0;
  erreurs = 0;
  indexProfil = 0;
  profilsRat√©s = [];
  ordreProfils = [...Array(profils.length).keys()];
  document.getElementById('progressBar').style.width = '0%';
  afficherProfil();
}

// Lancement initial
afficherProfil();
</script>
  </main>
</div>

</body>
</html>
