<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wordwall ‚Äì Appariement intuitif</title>
<style>
body{font-family:Arial,sans-serif;background:#eef3f9;margin:0;padding:20px}
.container{max-width:900px;margin:auto;background:#fff;padding:25px;border-radius:20px;box-shadow:0 6px 25px rgba(0,0,0,.12)}
h1{text-align:center;color:#004c97;margin-top:0}
.instruction{text-align:center;color:#333;margin-bottom:15px;font-size:18px}
.helper{text-align:center;font-size:15px;color:#666;margin-bottom:25px}
.game{display:flex;gap:20px}
.column{flex:1}
.column h2{text-align:center;color:#003366;margin-bottom:10px}
.card{padding:16px;margin:12px 0;background:#f3f7ff;border-radius:14px;text-align:center;cursor:pointer;font-size:18px;border:3px solid transparent;transition:.15s}
.card:hover{background:#e7efff}
.card.selected{border-color:#3f71ff;background:#dbe6ff}
.card.matched{background:#d2f2dc;border-color:#2eaf65;cursor:default}
.card.wrong{animation:shake .3s;border-color:#e03a3a;background:#fde0e0}
@keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-4px)}50%{transform:translateX(4px)}75%{transform:translateX(-4px)}100%{transform:translateX(0)}}

/* clignotement l√©ger c√¥t√© gauche */
@keyframes blink{
  0%{background:#dbe6ff}
  50%{background:#f3f7ff}
  100%{background:#dbe6ff}
}
.card.blink{animation:blink .6s ease-in-out}
.bottom{text-align:center;margin-top:25px}
button{padding:14px 28px;font-size:17px;border:none;border-radius:30px;cursor:pointer;background:#3f71ff;color:#fff}
button:hover{background:#2f5fe0}
.score{margin-top:8px;font-weight:bold;color:#004c97;font-size:18px}
.done{font-size:20px;color:#2eaf65;margin-top:15px;font-weight:bold}
</style>
  <link rel="stylesheet" href="../../exercise-layout.css">
  <script defer src="../../exercise-layout.js"></script>
</head>
<body>

<div class="back-home" style="max-width:1100px;margin:10px auto 0;padding:0 20px;">
  <a class="back-home__link" href="../../index.html" style="display:inline-flex;align-items:center;gap:6px;text-decoration:none;color:#004c6d;font-weight:700;border:1px solid #cfdff0;padding:6px 14px;border-radius:999px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.08);">‚Üê Retour √† l‚Äôindex</a>
</div>
<script src="../shared/proactif-exercise.js"></script>
<div class="exercise-shell">
  <main class="exercise-card">


<div class="container">
  <h1>Qualit√©s professionnelles ‚Äì niveau plus difficile</h1>
  <p class="instruction">Associez la qualit√© avec la phrase la plus pr√©cise (attention : phrases proches).</p>
  <p class="helper">üí° Astuce : une r√©ponse fausse bouge, une bonne r√©ponse devient verte.</p>

  <div class="game">
    <div class="column" id="left">
      <h2>Qualit√©s</h2>
    </div>
    <div class="column" id="right">
      <h2>Phrases</h2>
    </div>
  </div>

  <div class="bottom">
    <div class="score" id="progress">S√©rie 1 / 5</div>
    <div class="score" id="score">0 / 10</div>
    <button onclick="resetAll()">üîÑ R√©initialiser tout</button>
    <div id="done" class="done" style="display:none">‚úÖ S√©rie termin√©e</div>
  </div>
</div>

<script>
// 50 paires qualit√© ‚Üî phrase
const allPairs = [
  {a:"Ponctuel", b:"Je respecte toujours les horaires de travail et les d√©lais."},
  {a:"Autonome", b:"Je peux organiser mes t√¢ches sans surveillance constante."},
  {a:"Fiable", b:"Mon employeur peut compter sur moi sur la dur√©e."},
  {a:"Organis√©", b:"Je planifie mon travail pour √©viter les oublis."},
  {a:"Flexible", b:"J‚Äôaccepte des changements d‚Äôhoraires ou de t√¢ches."},
  {a:"Motiv√©", b:"Je montre de l‚Äôenvie et de l‚Äôengagement dans mon travail."},
  {a:"S√©rieux", b:"Je respecte les r√®gles et je fais mon travail avec attention."},
  {a:"Dynamique", b:"Je travaille avec √©nergie et implication."},
  {a:"Responsable", b:"J‚Äôassume mes t√¢ches et mes d√©cisions."},
  {a:"Patient", b:"Je prends le temps n√©cessaire pour bien faire."},

  {a:"Respectueux", b:"Je traite les autres avec politesse et consid√©ration."},
  {a:"Discret", b:"Je respecte la confidentialit√© au travail."},
  {a:"Rigoureux", b:"Je fais attention aux d√©tails et aux consignes."},
  {a:"Polyvalent", b:"Je peux effectuer diff√©rentes t√¢ches."},
  {a:"Efficace", b:"Je travaille rapidement sans perdre en qualit√©."},
  {a:"Consciencieux", b:"Je fais mon travail avec soin et responsabilit√©."},
  {a:"Disponible", b:"Je suis pr√™t √† aider quand on a besoin de moi."},
  {a:"Proactif", b:"Je prends des initiatives adapt√©es √† mon poste."},
  {a:"Adaptable", b:"Je m‚Äôajuste facilement aux nouvelles situations."},
  {a:"Ponctualit√©", b:"Le respect des horaires fait partie de mes priorit√©s."},

  {a:"Travail d‚Äô√©quipe", b:"Je collabore efficacement avec mes coll√®gues."},
  {a:"Communication", b:"Je transmets les informations de mani√®re claire."},
  {a:"Fiabilit√©", b:"On peut me faire confiance dans la dur√©e."},
  {a:"Organisation", b:"Je structure mon travail pour √™tre efficace."},
  {a:"Autonomie", b:"Je g√®re mon travail sans supervision constante."},
  {a:"Pers√©v√©rant", b:"Je continue m√™me quand le travail est difficile."},
  {a:"Calme", b:"Je garde le contr√¥le dans les situations stressantes."},
  {a:"Pr√©cis", b:"Je respecte exactement les consignes donn√©es."},
  {a:"Engag√©", b:"Je m‚Äôinvestis pleinement dans mes t√¢ches."},
  {a:"Professionnel", b:"J‚Äôadopte une attitude correcte en toute situation."},

  {a:"R√©actif", b:"Je r√©agis rapidement quand un probl√®me appara√Æt."},
  {a:"Fiable sur les horaires", b:"Je suis toujours pr√©sent aux heures pr√©vues."},
  {a:"M√©thodique", b:"J‚Äôutilise une m√©thode claire pour travailler."},
  {a:"Ouvert", b:"J‚Äôaccepte les remarques et les conseils."},
  {a:"Appliqu√©", b:"Je fais attention √† la qualit√© de mon travail."},
  {a:"R√©sistant", b:"Je supporte bien le rythme et la charge de travail."},
  {a:"Stable", b:"Je garde une attitude constante au travail."},
  {a:"Confiant", b:"Je crois en ma capacit√© √† bien faire mon travail."},
  {a:"Ordonn√©", b:"Je maintiens un espace de travail en ordre."},
  {a:"Disponible mentalement", b:"Je reste concentr√© pendant mes heures de travail."}
];

let selectedLeft = null;
let score = 0;
let serie = 0;
let errors = 0; // compteur d'erreurs au premier choix
const totalSeries = 5;
const perSerie = 10;
let pairs = [];

// üîê sauvegarde locale automatique (s√©rie atteinte)
function saveProgress(){
  localStorage.setItem('wordwall_serie', serie.toString());
}

function loadProgress(){
  const s = localStorage.getItem('wordwall_serie');
  if(s !== null){
    const value = parseInt(s);
    if(!isNaN(value) && value >= 0 && value < totalSeries){
      serie = value;
    }
  }
}

function shuffle(array){
  return array.sort(()=>Math.random()-0.5);
}

function initSerie(){
  score = 0;
  selectedLeft = null;
  document.getElementById('done').style.display='none';
  document.getElementById('progress').textContent = `S√©rie ${serie+1} / ${totalSeries}`;

  pairs = allPairs.slice(serie*perSerie, serie*perSerie + perSerie);
  document.getElementById('score').textContent = `0 / ${pairs.length} ¬∑ Erreurs : ${errors}`;

  const left = document.getElementById('left');
  const right = document.getElementById('right');
  left.querySelectorAll('.card').forEach(c=>c.remove());
  right.querySelectorAll('.card').forEach(c=>c.remove());

  shuffle([...pairs]).forEach(p=>{
    const d = document.createElement('div');
    d.className='card';
    d.textContent=p.a;
    d.dataset.match=p.b;
    d.onclick=()=>selectLeft(d);
    left.appendChild(d);
  });

  shuffle([...pairs]).forEach(p=>{
    const d = document.createElement('div');
    d.className='card';
    d.textContent=p.b;
    d.onclick=()=>selectRight(d);
    right.appendChild(d);
  });
}

function selectLeft(el){
  if(el.classList.contains('matched')) return;
  document.querySelectorAll('#left .card').forEach(c=>c.classList.remove('selected'));
  selectedLeft = el;
  el.classList.add('selected');
}

function selectRight(el){
  if(!selectedLeft || el.classList.contains('matched')) return;

  if(selectedLeft.dataset.match === el.textContent){
    // ‚úÖ Bonne r√©ponse
    selectedLeft.classList.remove('selected');
    selectedLeft.classList.add('matched');
    el.classList.add('matched');
    score++;
    document.getElementById('score').textContent = `${score} / ${pairs.length} ¬∑ Erreurs : ${errors}`;

    if(score === pairs.length){
      const done = document.getElementById('done');
      done.style.display='block';
      done.textContent = `‚úÖ S√©rie termin√©e ‚Äî ${errors} erreur(s)`;
      setTimeout(()=>{
        if(serie < totalSeries - 1){
          serie++;
          saveProgress();
          initSerie();
        } else {
          done.textContent = `‚úÖ Toutes les s√©ries termin√©es ‚Äî Total erreurs : ${errors}`;
          if (window.proactifMarkExerciseDone) {
            try { window.proactifMarkExerciseDone(); } catch (e) { }
          }
        }
      }, 1400);
    }
  } else {
    // ‚ùå Mauvaise r√©ponse au premier choix ‚Üí comptabilis√©e
    errors++; // erreur compt√©e
    document.getElementById('score').textContent = `${score} / ${pairs.length} ¬∑ Erreurs : ${errors}`;

    // reset du dernier mot choisi + clignotement
    selectedLeft.classList.remove('selected');
    selectedLeft.classList.add('blink');
    setTimeout(()=>selectedLeft.classList.remove('blink'),600);
    el.classList.add('wrong');
    setTimeout(()=>el.classList.remove('wrong'),300);
  }

  selectedLeft = null;
}

function resetAll(){
  // efface sauvegarde
  localStorage.removeItem('wordwall_serie');

  // reset √©tat global
  serie = 0;
  score = 0;
  errors = 0;
  selectedLeft = null;

  // efface toutes les listes visibles
  const left = document.getElementById('left');
  const right = document.getElementById('right');
  left.querySelectorAll('.card').forEach(c=>c.remove());
  right.querySelectorAll('.card').forEach(c=>c.remove());

  const done = document.getElementById('done');
  done.style.display = 'none';
  done.textContent = '‚úÖ S√©rie termin√©e';

  // relance depuis le d√©but
  initSerie();
}

// ‚ñ∂Ô∏è Lancement
loadProgress();
initSerie();
</script>
  </main>
</div>

</body>
</html>
