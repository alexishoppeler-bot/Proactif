<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>D√©bats ‚Äì Proactif Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --main:#004c97;
  --bg:#eef2f6;
  --card-bg:rgba(255,255,255,.45);
  --text:#000;
  --glass-border:rgba(255,255,255,.35);
}
body.dark{
  --bg:#0f172a;
  --card-bg:rgba(255,255,255,.1);
  --text:#fff;
  --glass-border:rgba(255,255,255,.15);
}
body{
  margin:0;padding:20px;
  font-family:Arial,sans-serif;
  background:var(--bg);color:var(--text);
}
.topBar{max-width:750px;margin:auto;text-align:center;position:relative}
h1{color:var(--main)}
#darkToggle{position:absolute;right:0;top:0;cursor:pointer;font-size:22px}
#compteur{font-weight:bold;margin-top:5px}
.progressContainer{width:100%;height:10px;border-radius:10px;background:rgba(0,0,0,.1);overflow:hidden;margin:10px 0 25px}
.progressBar{height:100%;width:0%;background:var(--main)}
.btn{
  display:block;margin:0 auto 20px;
  padding:12px 20px;font-size:17px;
  border:none;border-radius:12px;
  cursor:pointer;font-weight:bold;
  max-width:300px;color:#fff
}
#btnRandom{background:var(--main)}
#btnDone{background:#2e7d32}
#btnReset{background:#c62828;display:none}
#box{
  display:none;max-width:750px;margin:20px auto;
  padding:25px 30px;border-radius:18px;
  background:var(--card-bg);
  backdrop-filter:blur(12px);
  border:1px solid var(--glass-border);
}
.titre{font-size:23px;font-weight:bold;color:var(--main)}
.sectionTitle{font-weight:bold;font-size:17px;color:var(--main);margin-top:20px}
.doneMsg{text-align:center;font-size:24px;margin-top:30px;color:var(--main);display:none}
</style>
  <link rel="stylesheet" href="../../../exercise-layout.css">
  <script defer src="../../../exercise-layout.js"></script>
</head>

<body>

<div class="back-home" style="max-width:1100px;margin:10px auto 0;padding:0 20px;">
  <a class="back-home__link" href="../../../index.html" style="display:inline-flex;align-items:center;gap:6px;text-decoration:none;color:#004c6d;font-weight:700;border:1px solid #cfdff0;padding:6px 14px;border-radius:999px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.08);">‚Üê Retour √† l‚Äôindex</a>
</div>
<script src="../../shared/proactif-exercise.js"></script>
<div class="exercise-shell">
  <main class="exercise-card">



<div class="topBar">
  <h1>üé≠ D√©bats ‚Äì Proactif Premium</h1>
  <div id="darkToggle">üåô</div>
  <div id="compteur">D√©bats faits : 0 / 100</div>
  <div class="progressContainer"><div class="progressBar" id="progressBar"></div></div>
</div>

<button id="btnRandom" class="btn" onclick="newDebat()">üé≤ Nouveau d√©bat al√©atoire</button>
<button id="btnReset" class="btn" onclick="resetAll()">üîÑ R√©initialiser tout</button>

<div id="box">
  <div class="titre" id="titre"></div>
  <div class="sectionTitle">‚ùì Question</div>
  <div id="question"></div>
  <div class="sectionTitle">üß© Aides pour commencer</div>
  <ul id="aides"></ul>
  <div class="sectionTitle">üí¨ Relances</div>
  <ul id="relances"></ul>
  <button id="btnDone" class="btn" onclick="markDone()">‚úî Marquer comme fait</button>
</div>

<div class="doneMsg" id="doneMsg">üéâ Tous les d√©bats sont faits !</div>

<script>
const STORAGE_PREFIX = "proactif_debats_v1:";
const STORAGE_DONE_KEY = STORAGE_PREFIX + "done";
const STORAGE_DARK_KEY = STORAGE_PREFIX + "dark";
const LEGACY_DONE_KEY = "debatsDone";
const LEGACY_DARK_KEY = "darkMode";
const COMPLETE_AT = 10; // Marque l'exercice "Termin√©" apr√®s 10 d√©bats
let proactifDoneOnce = false;

function migrateLegacyIfAny(){
  try {
    if (!localStorage.getItem(STORAGE_DONE_KEY) && localStorage.getItem(LEGACY_DONE_KEY)) {
      localStorage.setItem(STORAGE_DONE_KEY, localStorage.getItem(LEGACY_DONE_KEY));
      localStorage.removeItem(LEGACY_DONE_KEY);
    }
    // Pour le mode sombre, on lit l'ancien sans l'effacer (peut √™tre utilis√© ailleurs)
    if (!localStorage.getItem(STORAGE_DARK_KEY) && localStorage.getItem(LEGACY_DARK_KEY)) {
      localStorage.setItem(STORAGE_DARK_KEY, localStorage.getItem(LEGACY_DARK_KEY));
    }
  } catch (e) { }
}

migrateLegacyIfAny();

darkToggle.onclick=()=>{
  document.body.classList.toggle("dark");
  try { localStorage.setItem(STORAGE_DARK_KEY, document.body.classList.contains("dark")); } catch (e) { }
};
if(localStorage.getItem(STORAGE_DARK_KEY)==="true"){document.body.classList.add("dark");}

const debats=[
{id:"d1",titre:"Ville ou campagne ?",question:"O√π pr√©f√©rez-vous vivre ?",aides:["La ville parce que‚Ä¶","La campagne parce que‚Ä¶","√áa d√©pend‚Ä¶"],relances:["O√π avez-vous grandi ?","O√π vous sentez-vous mieux ?"]},
{id:"d2",titre:"Sortir ou rester chez soi ?",question:"Que pr√©f√©rez-vous ?",aides:["Sortir parce que‚Ä¶","Rester √† la maison parce que‚Ä¶"],relances:["Vous sortez souvent ?"]},
{id:"d3",titre:"Travail rapide ou calme ?",question:"Quel rythme pr√©f√©rez-vous ?",aides:["Rapide parce que‚Ä¶","Calme parce que‚Ä¶"],relances:["Qu‚Äôest-ce qui vous fatigue ?"]},
{id:"d4",titre:"T√©l√©phoner ou √©crire ?",question:"Comment communiquez-vous ?",aides:["T√©l√©phoner parce que‚Ä¶","√âcrire parce que‚Ä¶"],relances:["Dans quelles situations ?"]},
{id:"d5",titre:"Temps libre",question:"Sortir ou rester tranquille ?",aides:["Sortir parce que‚Ä¶","Rester tranquille parce que‚Ä¶"],relances:["Qu‚Äôest-ce qui vous d√©tend ?"]},
{id:"d6",titre:"Travail proche ou mieux pay√© ?",question:"Que choisissez-vous ?",aides:["Proche parce que‚Ä¶","Mieux pay√© parce que‚Ä¶"],relances:["Le salaire est-il important ?"]},
{id:"d7",titre:"Manger sain ou vite ?",question:"Qu‚Äôest-ce qui est plus important ?",aides:["Sain parce que‚Ä¶","Rapide parce que‚Ä¶"],relances:["Cuisinez-vous souvent ?"]},
{id:"d8",titre:"Apprendre seul ou en groupe ?",question:"Comment apprenez-vous ?",aides:["Seul parce que‚Ä¶","En groupe parce que‚Ä¶"],relances:["Aimez-vous travailler avec les autres ?"]},
{id:"d9",titre:"Sport ou repos ?",question:"Quand vous √™tes fatigu√© ?",aides:["Sport parce que‚Ä¶","Repos parce que‚Ä¶"],relances:["Qu‚Äôest-ce qui vous aide ?"]},
{id:"d10",titre:"T√©l√©phone cher ou simple ?",question:"Que pr√©f√©rez-vous ?",aides:["Cher parce que‚Ä¶","Simple parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d11",titre:"Matin ou apr√®s-midi ?",question:"Quand travaillez-vous mieux ?",aides:["Le matin parce que‚Ä¶","L‚Äôapr√®s-midi parce que‚Ä¶"],relances:["Quand √™tes-vous en forme ?"]},
{id:"d12",titre:"Rester ou changer ?",question:"Au travail ?",aides:["Rester parce que‚Ä¶","Changer parce que‚Ä¶"],relances:["Aimez-vous la routine ?"]},
{id:"d13",titre:"Neuf ou occasion ?",question:"Que pr√©f√©rez-vous ?",aides:["Neuf parce que‚Ä¶","Occasion parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d14",titre:"T√©l√©vision ou t√©l√©phone ?",question:"Que regardez-vous le plus ?",aides:["T√©l√©vision parce que‚Ä¶","T√©l√©phone parce que‚Ä¶"],relances:["Quand ?"]},
{id:"d15",titre:"Courses",question:"Une fois par semaine ou tous les jours ?",aides:["Une fois par semaine parce que‚Ä¶","Tous les jours parce que‚Ä¶"],relances:["Vous planifiez ?"]},
{id:"d16",titre:"Travail physique ou calme ?",question:"Que pr√©f√©rez-vous ?",aides:["Physique parce que‚Ä¶","Calme parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d17",titre:"Vid√©os ou lecture ?",question:"Pour apprendre ?",aides:["Vid√©os parce que‚Ä¶","Lecture parce que‚Ä¶"],relances:["Qu‚Äôest-ce qui aide le plus ?"]},
{id:"d18",titre:"Dormir t√¥t ou tard ?",question:"Que pr√©f√©rez-vous ?",aides:["T√¥t parce que‚Ä¶","Tard parce que‚Ä¶"],relances:["√Ä quelle heure ?"]},
{id:"d19",titre:"Maison ou restaurant ?",question:"Pour manger ?",aides:["Maison parce que‚Ä¶","Restaurant parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d20",titre:"Salaire ou plaisir ?",question:"Qu‚Äôest-ce qui compte ?",aides:["Aimer le m√©tier parce que‚Ä¶","Salaire parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d21",titre:"Transports publics",question:"Faciles ou compliqu√©s ?",aides:["Faciles parce que‚Ä¶","Compliqu√©s parce que‚Ä¶"],relances:["Vous les utilisez ?"]},
{id:"d22",titre:"Avec animal ou sans ?",question:"Que pr√©f√©rez-vous ?",aides:["Avec parce que‚Ä¶","Sans parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d23",titre:"Vite ou tranquille ?",question:"Comment faites-vous ?",aides:["Vite parce que‚Ä¶","Tranquille parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d24",titre:"Commencer t√¥t ou finir t√¥t ?",question:"Que pr√©f√©rez-vous ?",aides:["Commencer t√¥t parce que‚Ä¶","Finir t√¥t parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d25",titre:"Pratique ou observation ?",question:"Comment apprenez-vous ?",aides:["En faisant parce que‚Ä¶","En regardant parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d26",titre:"Petit d√©jeuner ?",question:"Le matin ?",aides:["Oui parce que‚Ä¶","Non parce que‚Ä¶","√áa d√©pend‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d27",titre:"Musique forte ou douce ?",question:"Qu‚Äôest-ce qui vous relaxe ?",aides:["Forte parce que‚Ä¶","Douce parce que‚Ä¶"],relances:["Quand ?"]},
{id:"d28",titre:"Lit dur ou mou ?",question:"Comment dormez-vous ?",aides:["Dur parce que‚Ä¶","Mou parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d29",titre:"WhatsApp ou appel ?",question:"Que pr√©f√©rez-vous ?",aides:["WhatsApp parce que‚Ä¶","Appel parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d30",titre:"Photos ?",question:"Vous en prenez ?",aides:["Oui parce que‚Ä¶","Non parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d31",titre:"Vocal ou √©crit ?",question:"Messages ?",aides:["Vocal parce que‚Ä¶","√âcrit parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d32",titre:"Vid√©os ou appli ?",question:"Pour apprendre ?",aides:["Vid√©os parce que‚Ä¶","Application parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d33",titre:"Musique avec paroles ?",question:"Pour se concentrer ?",aides:["Avec paroles parce que‚Ä¶","Sans paroles parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d34",titre:"Seul ou avec des gens ?",question:"Temps libre ?",aides:["Seul parce que‚Ä¶","Avec des gens parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d35",titre:"Recevoir des visites ?",question:"Chez vous ?",aides:["Oui parce que‚Ä¶","Non parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d36",titre:"Organiser ou improviser ?",question:"Vos journ√©es ?",aides:["Organiser parce que‚Ä¶","Improviser parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d37",titre:"Nouveaut√©s ou habitudes ?",question:"Que pr√©f√©rez-vous ?",aides:["Nouveaut√©s parce que‚Ä¶","Habitudes parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d38",titre:"Loyer cher ou √©conomiser ?",question:"Que choisissez-vous ?",aides:["Cher parce que‚Ä¶","√âconomiser parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d39",titre:"Produits locaux ou moins chers ?",question:"Que pr√©f√©rez-vous ?",aides:["Locaux parce que‚Ä¶","Moins chers parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d40",titre:"√âconomiser ou plaisir ?",question:"Qu‚Äôest-ce qui est plus important ?",aides:["√âconomiser parce que‚Ä¶","Plaisir parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d41",titre:"Promotions ?",question:"Acheter ?",aides:["Oui parce que‚Ä¶","Non parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d42",titre:"Uniforme ?",question:"Au travail ?",aides:["Avec parce que‚Ä¶","Sans parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d43",titre:"Pause seul ou ensemble ?",question:"Que pr√©f√©rez-vous ?",aides:["Seul parce que‚Ä¶","Ensemble parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d44",titre:"Planning fixe ?",question:"Ou changeant ?",aides:["Fixe parce que‚Ä¶","Changeant parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d45",titre:"T√¢ches faciles ou difficiles ?",question:"En premier ?",aides:["Faciles parce que‚Ä¶","Difficiles parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d46",titre:"Lumi√®re le matin ?",question:"Rideaux ?",aides:["Ouvrir parce que‚Ä¶","Fermer parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d47",titre:"S√©ries ou films ?",question:"Que regardez-vous ?",aides:["S√©ries parce que‚Ä¶","Films parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d48",titre:"Mer ou montagne ?",question:"Vacances ?",aides:["Mer parce que‚Ä¶","Montagne parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d49",titre:"Petit ou grand magasin ?",question:"Pour travailler ?",aides:["Petit parce que‚Ä¶","Grand parce que‚Ä¶"],relances:["Pourquoi ?"]},
{id:"d50",titre:"Four ou po√™le ?",question:"Pour cuisiner ?",aides:["Four parce que‚Ä¶","Po√™le parce que‚Ä¶"],relances:["Pourquoi ?"]}
];

let done=JSON.parse(localStorage.getItem(STORAGE_DONE_KEY)||"[]");
let current=null;

function updateProgress(){
  const total = Array.isArray(debats) ? debats.length : 0;
  compteur.innerText=`D√©bats faits : ${done.length} / ${total || 0}`;
  progressBar.style.width = total ? ((done.length / total) * 100).toFixed(0) + "%" : "0%";

  if (!proactifDoneOnce && done.length >= Math.min(COMPLETE_AT, total || COMPLETE_AT)) {
    proactifDoneOnce = true;
    try { window.proactifMarkExerciseDone && window.proactifMarkExerciseDone(); } catch (e) { }
  }
}
function newDebat(){
  const r=debats.filter(d=>!done.includes(d.id));
  if(!r.length){box.style.display="none";doneMsg.style.display="block";return;}
  current=r[Math.floor(Math.random()*r.length)];
  titre.innerText=current.titre;
  question.innerText=current.question;
  aides.innerHTML=current.aides.map(x=>`<li>${x}</li>`).join("");
  relances.innerHTML=current.relances.map(x=>`<li>${x}</li>`).join("");
  box.style.display="block";
}
function markDone(){
  if(current&&!done.includes(current.id)){
    done.push(current.id);
    localStorage.setItem(STORAGE_DONE_KEY,JSON.stringify(done));
  }
  updateProgress();newDebat();btnReset.style.display="block";
}
function resetAll(){
  if(!confirm("R√©initialiser tous les d√©bats ?"))return;
  done=[];localStorage.removeItem(STORAGE_DONE_KEY);
  proactifDoneOnce = false;
  updateProgress();box.style.display="none";doneMsg.style.display="none";
}
updateProgress();
</script>

  </main>
</div>

</body>
</html>
